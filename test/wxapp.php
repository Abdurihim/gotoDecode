<?php
defined("IN_IA") or die("Access Denied"); class Yyf_companyModuleWxapp extends WeModuleWxapp { public function doPageTabBar() { global $_GPC, $_W; require_once dirname(__FILE__) . "/lib/lib_wx_tabbar.php"; } public function doPageAdsense() { global $_GPC, $_W; require_once dirname(__FILE__) . "/lib/lib_wx_adsense.php"; } public function doPageIndex() { goto s2O4n; s2O4n: global $_GPC, $_W; goto SlNfb; aEBE9: p4zh8: goto H1fVn; d9s2p: $errno = 0; goto wINEI; D2fV6: $catlist = pdo_fetchall("select `id` , `name`,`type`,`show_num` from " . tablename("yyf_company_category") . " where `type`<>'3' and `isshow`='1' and `uniacid`='{$uniacid}' and `fid`=8' order by `sortrank` desc"); goto B2W4j; NqiH5: u4Fy6: goto lokrG; H1fVn: $hornData = pdo_get("yyf_company_style", array("uniacid" => $uniacid), array("horn", "slide_close", "nav_close", "notice_close", "slide_height", "nav_style", "title_style")); goto Jp020; CxMsF: $list = array(); goto D2fV6; lokrG: $data["slide"] = $list; goto UtXd9; B2W4j: foreach ($catlist as $key => $value) { goto ZeS9G; DgOGA: $cids = "`cid` in ({$cids})"; goto nPh8p; sYCIx: if ($value["type"] == 1 || $value["type"] == 6) { goto Gp2MZ; } goto vEvEs; dcYy3: $cids .= $fid; goto DgOGA; x5Iuf: foreach ($catSonList as $k => $v) { $cids .= $v["id"] . ","; I3RpD: } goto xx3xE; NZ_jS: if ($jK9Ls) { goto R0ROY; } goto ZBm4U; nPh8p: $show_num = $value["show_num"]; goto WnFNm; tsdFN: n8tIO: goto z2JQy; f01x4: goto n8tIO; goto eYpeb; i1M7U: goto n8tIO; goto mqBji; ApnU8: if ($value["type"] == 5) { goto Kd1Ni; } goto detJq; detJq: $list[$key]["url"] = "../news/news?tid=" . $value["id"]; goto f01x4; z2JQy: foreach ($datalist as $k => $v) { goto lyZub; xq1Gf: ZNTQB: goto SlZGl; WPUCo: $videosrc = trim($v["videosrc"]); goto cbkZY; lyZub: $datalist[$k]["thumb"] = tomedia($v["thumb"]); goto Vq4Zi; SlZGl: b99t3: goto p0vFu; K8Tt8: JUoNf: goto xorS1; C2kIA: $datalist[$k]["url"] = "../video/video?id=" . $v["id"]; goto FUXrT; xorS1: $datalist[$k]["url"] = "../content/content?id=" . $v["id"]; goto xq1Gf; rvltQ: $datalist[$k]["addtime"] = date("Y-m-d", $v["addtime"]); goto kKbR0; Vq4Zi: if ($value["type"] == "4") { goto Loohs; } goto rvltQ; kKbR0: goto mw1Yg; goto VjK8T; QLW3M: mw1Yg: goto WPUCo; FUXrT: goto ZNTQB; goto K8Tt8; cbkZY: if (empty($videosrc)) { goto JUoNf; } goto C2kIA; qNZXe: $datalist[$k]["addtime"] = date("m-d", $v["addtime"]); goto QLW3M; VjK8T: Loohs: goto qNZXe; p0vFu: } goto pzCDJ; f5CZm: $cids = ''; goto x5Iuf; dq8WV: $catSonList = pdo_fetchall("select `id`  from " . tablename("yyf_company_category") . " where `fid`='{$fid}'"); goto f5CZm; Z3yM4: eGjfo: goto OTE6_; WnFNm: $datalist = pdo_fetchall("select `id` , `cid` ,`title`, `thumb`,`addtime`,`videosrc`,`appid`,`pageaddress` from " . tablename("yyf_company_news") . " where {$cids} and `uniacid`='{$uniacid}' order by sortrank desc,id desc limit {$show_num}"); goto TRkuJ; kfGeA: R0ROY: goto AzPXF; vEvEs: if ($value["type"] == 4) { goto eGjfo; } goto ApnU8; ZBm4U: $list[$key] = $value; goto sYCIx; TRkuJ: $jK9Ls = !count($datalist); goto NZ_jS; eYpeb: Gp2MZ: goto wVPiG; mqBji: Kd1Ni: goto x_U5L; x_U5L: $list[$key]["url"] = "../imglist/imglist?tid=" . $value["id"] . "&fid=0"; goto tsdFN; OTE6_: $list[$key]["url"] = "../newsnoimg/newsnoimg?tid=" . $value["id"] . "&fid"; goto i1M7U; mSz8Q: $list[$key]["list"] = $datalist; goto kfGeA; gOLC2: goto n8tIO; goto Z3yM4; wVPiG: $list[$key]["url"] = "../case/case?tid=" . $value["id"]; goto gOLC2; AzPXF: vmkLJ: goto QxtdN; pzCDJ: RZLi9: goto mSz8Q; ZeS9G: $fid = $value["id"]; goto dq8WV; xx3xE: HDCMq: goto dcYy3; QxtdN: } goto aEBE9; Jp020: $data["horn"] = tomedia($hornData["horn"]); goto KGOho; KGOho: $data["slide_close"] = $hornData["slide_close"]; goto dMLkp; dMLkp: $data["nav_close"] = $hornData["nav_close"]; goto YuETJ; t4vkE: $data["title_style"] = $hornData["title_style"]; goto gqDlJ; DB3fO:$result['company_logo']=tomedia($result['company_logo']);$data["sysinfo"] = $result; goto Xeftf; GQyD2: foreach ($list as $key => $value) { goto HlquD; rKldY: $videosrc = pdo_getcolumn("yyf_company_news", array("id" => $aid), "videosrc"); goto xP077; iMMrP: $aid = $value["aid"]; goto rKldY; o14bn: $list[$key]["url"] = "../video/video?id=" . $value["aid"]; goto h7Zcm; oDcru: me2DB: goto lRSDf; xP077: $videosrc = trim($videosrc); goto zJkq1; h7Zcm: goto me2DB; goto it0Aw; HlquD: $list[$key]["images"] = tomedia($value["images"]); goto iMMrP; lRSDf: dkpk3: goto O7eBp; rs716: $list[$key]["url"] = "../content/content?id=" . $value["aid"]; goto oDcru; it0Aw: AfE9G: goto rs716; zJkq1: if (empty($videosrc)) { goto AfE9G; } goto o14bn; O7eBp: } goto NqiH5; xjUU6: $message = "返回消息"; goto d9s2p; wINEI: return $this->result($errno, $message, $data); goto DrKwh; S2dEi: $data["slide_height"] = $hornData["slide_height"]; goto Dw5UQ; YP896: Ph99E: goto QqP9y; QqP9y: $data["cats"] = $cats; goto CxMsF; UtXd9: $result = pdo_fetch("SELECT `jing`,`wei`,`notice`,`phone`,`copyright`,`name`,`title`,jing,wei,company_name,company_described,company_logo,address,address_described,appid FROM " . tablename("yyf_company_sysinfo") . " where `uniacid`='{$uniacid}' order by id desc limit 1");goto DB3fO; scnuA: $list = pdo_fetchall("select `aid`,`images` from " . tablename("yyf_company_slide") . " where `uniacid`='{$uniacid}' order by `sortrank` desc"); goto GQyD2; Xeftf: $cats = pdo_fetchall("SELECT `id`,`name`,`thumb`,`type` FROM " . tablename("yyf_company_category") . " where `uniacid`='{$uniacid}' and `fid`='0' and `isshow_nav`=8' order by sortrank desc"); goto jUITJ; YuETJ: $data["notice_close"] = $hornData["notice_close"]; goto S2dEi; jUITJ: foreach ($cats as $key => $value) { goto zzGFR; GkwXW: $cats[$key]["url"] = "../newsnoimg/newsnoimg?tid=" . $value["id"] . "&fid"; goto o01w9; BcRuY: $cats[$key]["url"] = "../news/news?tid=" . $value["id"] . "&fid=0"; goto olXj4; SNSqF: goto PndBT; goto MMGrK; KfQ6R: n_qSM: goto AxpNw; zzGFR: $cats[$key]["thumb"] = tomedia($value["thumb"]); goto S64Bd; o01w9: goto PndBT; goto XOMri; ArwSq: if ($value["type"] == 2) { goto vLdbt; } goto eoqQ5; eoqQ5: if ($value["type"] == 4) { goto fJYU2; } goto yBGsq; h10WL: fJYU2: goto GkwXW; MmWAc: $cats[$key]["url"] = "../about/about?tid=" . $value["id"]; goto QC3Vg; XOMri: xWce_: goto O5_SX; O5_SX: $cats[$key]["url"] = "../imglist/imglist?tid=" . $value["id"] . "&fid"; goto Q4Oec; QC3Vg: goto PndBT; goto qkKM2; qA9UB: $cats[$key]["url"] = "../case/case?tid=" . $value["id"] . "&fid=0"; goto SNSqF; olXj4: goto PndBT; goto h10WL; S64Bd: if ($value["type"] == 1 || $value["type"] == 6) { goto nQkaE; } goto ArwSq; qkKM2: nQkaE: goto qA9UB; MMGrK: vLdbt: goto BcRuY; yBGsq: if ($value["type"] == 5) { goto xWce_; } goto MmWAc; Q4Oec: PndBT: goto KfQ6R; AxpNw: } goto YP896; SlNfb: $uniacid = $_GPC["uniacid"]; goto scnuA; gqDlJ: $data["list"] = $list; goto xjUU6; Dw5UQ: $data["nav_style"] = $hornData["nav_style"]; goto t4vkE; DrKwh: } public function doPageContent() { goto m0lNm; ve_wy: $data = $arr; goto Mp9jm; Cp85C: $arr["addtime"] = date("Y-m-d", $arr["addtime"]); goto Nm02N; IDELU: return $this->result($errno, $message, $data); goto v87Vn; DVowg: $LNSBM = !$_GPC["id"]; goto TVazj; kge6m: $arr = pdo_get("yyf_company_news", array("id" => $id), array("title", "addtime", "content", "videosrc")); goto Cp85C; lSb5j: return 1; goto WrjE4; aD7Tm: $id = $_GPC["id"]; goto kge6m; TVazj: if ($LNSBM) { goto gQjaO; } goto aD7Tm; Nm02N: $videosrc = trim($arr["videosrc"]); goto bclqF; m0lNm: global $_GPC, $_W; goto DVowg; woXyM: $errno = 0; goto f2Ro6; f2Ro6: $data["content"] = htmlspecialchars_decode($arr["content"]); goto IDELU; v87Vn: gQjaO: goto lSb5j; Mp9jm: $message = "返回消息"; goto woXyM; bclqF: empty($videosrc) ? $arr["videosrc"] = 0 : ($arr["videosrc"] = $videosrc); goto ve_wy; WrjE4: } public function doPageAbout() { goto fkWvH; s1E9r: return $this->result($errno, $message, $data); goto XDTN2; NhsfN: $uniacid = $_GPC["uniacid"]; goto cmB1o; DWGbZ: $tid = $_GPC["tid"]; goto NhsfN; UtwGy: $data = $arr; goto oQF7D; YW0be: $data["content"] = htmlspecialchars_decode($arr["content"]); goto ZMXyO; ZMXyO: $data["catname"] = $arr["name"]; goto s1E9r; cmB1o: $arr = pdo_fetch("SELECT `name`,`content` FROM " . tablename("yyf_company_category") . " where `id`={$tid} and `uniacid`='{$uniacid}'"); goto UtwGy; Na8ng: $errno = 0; goto YW0be; oQF7D: $message = "返回消息"; goto Na8ng; fkWvH: global $_GPC, $_W; goto DWGbZ; XDTN2: } public function doPageCase() { goto ylH4n; buz8x: $id = 3; goto pUCdc; su2NQ: $errno = 0; goto sUAjE; yDb0J: oZpop: goto t9nK1; yJoOk: foreach ($newslist as $key => $value) { $newslist[$key]["thumb"] = tomedia($value["thumb"]); I5AE_: } goto yDb0J; cNMxz: $id = 2; goto MfhoP; sUAjE: return $this->result($errno, $message, $data); goto KPSDF; t9nK1: $data = $newslist; goto yk64C; MfhoP: $djNfm = !($op != "case"); goto aE9V1; KdR10: $newslist = pdo_fetchall("select `id` , `title`, `thumb` from " . tablename("yyf_company_news") . " where `cid`='{$id}' order by id desc"); goto yJoOk; yk64C: $message = "返回消息"; goto su2NQ; qrGv6: $op = $_GPC["op"]; goto cNMxz; pUCdc: auqd0: goto KdR10; aE9V1: if ($djNfm) { goto auqd0; } goto buz8x; ylH4n: global $_GPC, $_W; goto dmBDE; dmBDE: $uniacid = $_GPC["uniacid"]; goto qrGv6; KPSDF: } public function doPageNews() { goto EiMM7; bFpfk: $limit = 8; goto Ab84u; f_fSE: $map .= " and `id` < {$lastid}"; goto Qw6Jm; EiMM7: global $_GPC, $_W; goto bFpfk; moGGx: $cats = pdo_fetchall("SELECT `id`,`name`,`fid`,`type` FROM " . tablename("yyf_company_category") . " where `uniacid`='{$uniacid}' and `fid`={$tid} order by sortrank desc"); goto sYfnj; Qw6Jm: YMHar: goto Mney3; pISwa: $cats = pdo_get("yyf_company_category", array("id" => $tid), array("name", "type")); goto pmv3R; D7UoY: i2QiS: goto RSYRa; tftsY: $data["currentIndex"] = $tid; goto CpQnk; pmv3R: $data["catname"] = $cats["name"]; goto o_snW; tvQFN: $cats = pdo_fetchall("SELECT `id`,`name`,`fid`,`type` FROM " . tablename("yyf_company_category") . " where `uniacid`='{$uniacid}' and `fid`='{$fid}' order by sortrank desc"); goto dbWB7; oC9Db: sWMsu: goto pISwa; uB8F2: $data["fatherId"] = $tid; goto moGGx; Ab84u: $lastid = $_GPC["lastid"]; goto cQvJ7; ZItOC: $errno = 0; goto HjEh7; x8eii: $tid = $_GPC["tid"]; goto X9iSI; X9iSI: $map = "`cid`= {$tid}"; goto ys98T; HjEh7: return $this->result($errno, $message, $data); goto he5i1; E7aAe: $map .= " and `id` < {$lastid}"; goto jBqvt; cQvJ7: $uniacid = $_GPC["uniacid"]; goto x8eii; RSYRa: $fid = $_GPC["fid"]; goto tvQFN; ys98T: $Qmc5O = !($lastid > 0); goto ushAy; BXqmx: if ($_GPC["fid"] > 0) { goto i2QiS; } goto uB8F2; G3h2h: $map = "`cid` in ({$cids})"; goto Ng7iB; BQ7Dd: foreach ($cats as $key => $value) { $cids .= $value["id"] . ","; eDQX1: } goto jMtRi; J7PAu: if ($Qmc5O) { goto YMHar; } goto f_fSE; p8KXD: goto wTAWf; goto D7UoY; jMtRi: MilvT: goto TAmbT; MH2Mn: foreach ($newslist as $key => $value) { goto WP7wM; nMbnb: Pb3zF: goto wZyAY; WP7wM: $newslist[$key]["thumb"] = tomedia($value["thumb"]); goto ov7cB; ov7cB: $newslist[$key]["addtime"] = date("m-d", $value["addtime"]); goto JWfPW; kR7XK: goto HiSRg; goto nMbnb; r3ebR: if (empty($videosrc)) { goto Pb3zF; } goto z3XaJ; wZyAY: $newslist[$key]["url"] = "../content/content?id=" . $value["id"]; goto a6KkU; z3XaJ: $newslist[$key]["url"] = "../video/video?id=" . $value["id"]; goto kR7XK; a6KkU: HiSRg: goto wxoyA; wxoyA: iyFVE: goto Xhb3B; JWfPW: $type == 4 ? $newslist[$key]["addtime"] = date("m-d", $value["addtime"]) : ''; goto bW56O; bW56O: $videosrc = trim($value["videosrc"]); goto r3ebR; Xhb3B: } goto oC9Db; jBqvt: IxeRV: goto BXqmx; wJKZX: $message = "返回消息"; goto ZItOC; Mney3: $newslist = pdo_fetchall("select `id` , `title`, `thumb`,`addtime`,`videosrc`,`appid`,`pageaddress` from " . tablename("yyf_company_news") . " where " . $map . " and `uniacid`='{$uniacid}' order by sortrank desc,id desc limit {$limit}"); goto p8KXD; Cq2Ep: $data["cats"] = $cats; goto tftsY; o_snW: $data["type"] = $cats["type"]; goto b1pe4; sYfnj: $data["currentCatId"] = $_GPC["tid"]; goto qqt8a; xpPWv: $data["fatherId"] = $fid; goto N3uSR; CpQnk: $newslist = pdo_fetchall("select `id` , `title`, `thumb`,`addtime`,`videosrc`,`appid`,`pageaddress` from " . tablename("yyf_company_news") . " where " . $map . " and `uniacid`='{$uniacid}' order by sortrank desc,id desc limit {$limit}"); goto xpPWv; YFyPB: $data["currentIndex"] = 0; goto g631L; qqt8a: $data["cats"] = $cats; goto YFyPB; Ng7iB: $Qmc5O = !($lastid > 0); goto J7PAu; b1pe4: $data["list"] = $newslist; goto wJKZX; ushAy: if ($Qmc5O) { goto IxeRV; } goto E7aAe; g631L: $cids = ''; goto BQ7Dd; dbWB7: $data["currentCatId"] = $_GPC["tid"]; goto Cq2Ep; N3uSR: wTAWf: goto MH2Mn; TAmbT: $cids .= $tid; goto G3h2h; he5i1: } public function doPageContact() { goto fwh3N; H7PVH: $result = pdo_fetch("SELECT `jing`,`wei`,`address`,`phone`,`email`,`qq` FROM " . tablename("yyf_company_sysinfo") . " where `uniacid`='{$uniacid}' order by id desc limit 1"); goto AJvfw; VL25w: $uniacid = $_GPC["uniacid"]; goto H7PVH; oolki: $errno = 0; goto BG6Yu; TN2r5: $result["contact_background"] = tomedia($conArr["contact_background"]); goto NRxuS; NRxuS: $result["contact_logo"] = tomedia($conArr["contact_logo"]); goto onTKP; kItsg: $result["custom_close"] = $conArr["custom_close"]; goto qlFou; DBfad: $message = "返回消息"; goto oolki; fwh3N: global $_GPC, $_W; goto VL25w; AJvfw: $conArr = pdo_get("yyf_company_style", array("uniacid" => $uniacid), array("contact_background", "contact_name", "contact_logo", "custom_close")); goto TN2r5; BG6Yu: return $this->result($errno, $message, $data); goto DV3T8; onTKP: $result["contact_name"] = $conArr["contact_name"]; goto kItsg; qlFou: $data = $result; goto DBfad; DV3T8: } public function doPageForm() { goto wsz88; wsz88: global $_GPC, $_W; goto rlPCT; rlPCT: $uniacid = $_GPC["uniacid"]; goto dMEzl; hakJv: $result["rvalue"] = explode(",", $result["rvalue"]); goto cnJRw; cnJRw: $result["cvalue"] = explode(",", $result["cvalue"]); goto JrpWU; JrpWU: $result["thumb"] != '' ? $result["thumb"] = tomedia($result["thumb"]) : ($result["thumb"] = 0); goto gLajx; gLajx: $data = $result; goto P8Wg5; P8Wg5: $message = "返回消息"; goto wlA1S; dMEzl: $result = pdo_fetch("SELECT * FROM " . tablename("yyf_company_form") . " where `uniacid`='{$uniacid}' order by id desc limit"); goto hakJv; wlA1S: $errno = 0; goto dZYuF; dZYuF: return $this->result($errno, $message, $data); goto IrsUi; IrsUi: } public function doPageFormAdd() { global $_GPC, $_W; require_once dirname(__FILE__) . "/lib/lib_wx_message.php"; } public function doPageSendMail() { global $_GPC, $_W; require_once dirname(__FILE__) . "/lib/lib_wx_sendmail.php"; } }